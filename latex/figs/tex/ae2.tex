\begin{tikzpicture}[>=latex]

  \tikzstyle{netstyle} = [matrix of nodes,nodes={draw,circle,inner sep=0, minimum size=1cm},column sep=0.5cm,row sep=-9pt]
  \tikzstyle{cl} = [draw=none,fill=none]
  \tikzstyle{heading} = [clear,text width=15mm,text centered]
  \tikzstyle{inp} = [fill=red!70!pagecolor]
  \tikzstyle{hid} = [fill=blue!70!pagecolor]
  \tikzstyle{ou} = [fill=green!70!pagecolor]

  \matrix[netstyle] (mat)
  {
    |[inp]| $x_1$  & |[cl]| & |[cl]| & |[cl]| & |[cl]| & |[cl]| & |[ou]|$\tilde{x}_1$ \\
    |[cl]| & |[hid]|$h_1^1$   & |[cl]| & |[cl]| & |[cl]| & |[hid]|$h_1^3$  & |[cl]|  \\
    |[inp]| $x_2$  & |[cl]| & |[hid]|$h_2^2$ & |[cl]| & |[hid]| $h_2^4$ & |[cl]| & |[ou]|$\tilde{x}_2$ \\
    |[cl]| & |[hid]|$h_2^1$   & |[cl]| & |[hid]| $h_2^3$ & |[cl]| & |[hid]|$h_2^3$ & |[cl]| \\
    |[inp]| $x_3$ & |[cl]| & |[hid]|$h_3^2$ & |[cl]| & |[hid]| $h_3^4$ & |[cl]| & |[ou]|$\tilde{x}_3$ \\
    |[cl]| & |[hid]|$h_3^1$   & |[cl]| & |[cl]| & |[cl]| & |[hid]|$h_3^3$ & |[cl]| \\
    |[inp]| $x_4$ & |[cl]| & |[cl]| & |[cl]| & |[cl]| & |[cl]| & |[ou]|$\tilde{x}_4$ \\
  };

  % titels
  \node [yshift=1cm] (text) at (mat-1-4) {Flaschenhals};
  \path [draw,ultra thick,->,>=stealth] (text) -- ($(text)!0.7!(mat-3-4)$);

  % dots
  % \node [yshift=-1cm,scale=2] at (mat-7-1) {$\vdots$}; % for inputs
  % \node [yshift=-1cm,scale=2] at (mat-6-3) {$\vdots$};
  % \node [yshift=-1cm,scale=2] at (mat-7-4) {$\vdots$};
  % \node [yshift=-1cm,scale=2] at (mat-6-5) {$\vdots$};
  % \node [yshift=-1cm,scale=2] at (mat-7-7) {$\vdots$}; % for outputs

  % input -> hidden1
  \foreach \ai in {1,3,...,7} {
    \foreach \aii in {2,4,6}
    \draw[->] (mat-\ai-1) -- (mat-\aii-2);


  }

  % hidden1 -> hidden2
  \foreach \ai in {2,4,...,6} {
    \foreach \aii in {3,5}
    \draw[->] (mat-\ai-2) -- (mat-\aii-3);
  }

  % hidden2 -> hidden3
  \foreach \ai in {3,5} {
    \foreach \aii in {4}
    \draw[->] (mat-\ai-3) -- (mat-\aii-4);
  }

  % hidden3 -> output
  \foreach \ai in {4} {
    \foreach \aii in {3,5}
    \draw[->] (mat-\ai-4) -- (mat-\aii-5);

  }

  % hidden3 -> output
  \foreach \ai in {3,5} {
    \foreach \aii in {2,4,6}
    \draw[->] (mat-\ai-5) -- (mat-\aii-6);
  }

  % hidden3 -> output
  \foreach \ai in {2,4,6} {
    \foreach \aii in {1,3,...,7}
    \draw[->] (mat-\ai-6) -- (mat-\aii-7);
  }

\end{tikzpicture}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../figs"
%%% End:
