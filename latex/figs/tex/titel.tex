\makeatletter
\tikzoption{canvas is plane}[]{\@setOxy#1}
\def\@setOxy O(#1,#2,#3)x(#4,#5,#6)y(#7,#8,#9)%
{\def\tikz@plane@origin{\pgfpointxyz{#1}{#2}{#3}}%
  \def\tikz@plane@x{\pgfpointxyz{#4}{#5}{#6}}%
  \def\tikz@plane@y{\pgfpointxyz{#7}{#8}{#9}}%
  \tikz@canvas@is@plane
}
\makeatother

\begin{tikzpicture}[line join=round,white]
  \coordinate (offset) at (0,0,0);


  % \includegraphics[width=2.5cm]{tf_logo.png}
  %   \includegraphics[width=2cm]{keras_logo.jpg}

  % #1 is size
  % #2 is depth
  % #3 is x-offset
  \newcommand{\deflayer}[4]{
    \def\s{#1/2}
    \def\d{#2}
    \def\o{#3}
    \def\c{#4}

    \coordinate (offset) at ($(offset)+(\o+\d,0,0)$);

    \coordinate (A) at ($(offset)+(-\d, -\s, \s)$);
    \coordinate (B) at ($(offset)+(0, -\s, \s)$);
    \coordinate (C) at ($(offset)+(0, \s, \s)$);
    \coordinate (D) at ($(offset)+(-\d,\s,\s)$);

    \coordinate (E) at ($(offset)+(-\d,-\s,-\s)$);
    \coordinate (F) at ($(offset)+(0, -\s,-\s)$);
    \coordinate (G) at ($(offset)+(0,\s, -\s)$);
    \coordinate (H) at ($(offset)+(-\d,\s,-\s)$);

  }

  \newcommand{\drawlayer}[0]{
    \path[draw,thick, fill=\c] (E) -- (F) -- (G) -- (H) -- cycle; % back
    \path[draw,thick, fill=\c] (E) -- (F) -- (B) -- (A) -- cycle; % bottom
    \path[draw,thick, fill=\c] (E) -- (A) -- (D) -- (H) -- cycle; % left
    \path[draw,thick, fill=\c] (B) -- (F) -- (G) -- (C) -- cycle; % right
    \path[draw,thick, fill=\c] (A) -- (B) -- (C) -- (D) -- cycle; % front
    \path[draw,thick, fill=\c] (D) -- (C) -- (G) -- (H) -- cycle; % top
  }


  \deflayer{3.0}{0.1}{0}{red!60!black}

  \coordinate(1-A) at (A);
  \coordinate(1-D) at (D);
  \coordinate(1-H) at (H);
  \coordinate(1-E) at (E);

  \drawlayer{}
  \deflayer{3.0}{0.1}{0.1}{green!60!black}
  \drawlayer{}
  \deflayer{3.0}{0.1}{0.1}{blue!60!black}
  \drawlayer{}

  \coordinate(1-B) at (B);
  \coordinate(1-C) at (C);
  \coordinate(1-F) at (F);
  \coordinate(1-G) at (G);

  \deflayer{1.8}{1}{1.5}{white!30!black}

  \coordinate(2-A) at (A);
  \coordinate(2-B) at (B);
  \coordinate(2-C) at (C);
  \coordinate(2-D) at (D);
  \coordinate(2-E) at (E);
  \coordinate(2-F) at (F);
  \coordinate(2-G) at (G);
  \coordinate(2-H) at (H);
  \draw[thick,dashed] (1-B) -- (2-A);
  \draw[thick,dashed] (1-F) -- (2-E);
  \draw[thick,dashed] (1-C) -- (2-D);
  \draw[thick,dashed] (1-G) -- (2-H);
  \drawlayer{}

  \deflayer{1}{3}{1.5}{white!60!black}

  \coordinate(3-A) at (A);
  \coordinate(3-B) at (B);
  \coordinate(3-C) at (C);
  \coordinate(3-D) at (D);
  \coordinate(3-E) at (E);
  \coordinate(3-F) at (F);
  \coordinate(3-G) at (G);
  \coordinate(3-H) at (H);
  \draw[thick,dashed] (2-B) -- (3-A);
  \draw[thick,dashed] (2-F) -- (3-E);
  \draw[thick,dashed] (2-C) -- (3-D);
  \draw[thick,dashed] (2-G) -- (3-H);
  \drawlayer{}

  \deflayer{1.8}{1}{1.5}{white!30!black}

  \coordinate(4-A) at (A);
  \coordinate(4-B) at (B);
  \coordinate(4-C) at (C);
  \coordinate(4-D) at (D);
  \coordinate(4-E) at (E);
  \coordinate(4-F) at (F);
  \coordinate(4-G) at (G);
  \coordinate(4-H) at (H);
  \draw[thick,dashed] (3-B) -- (4-A);
  \draw[thick,dashed] (3-F) -- (4-E);
  \draw[thick,dashed] (3-C) -- (4-D);
  \draw[thick,dashed] (3-G) -- (4-H);
  \drawlayer{}

  \deflayer{3.0}{0.1}{1.5}{red!60!black}

  \coordinate(5-A) at (A);
  \coordinate(5-D) at (D);
  \coordinate(5-E) at (E);
  \coordinate(5-H) at (H);
  \draw[thick,dashed] (4-B) -- (5-A);
  \draw[thick,dashed] (4-F) -- (5-E);
  \draw[thick,dashed] (4-C) -- (5-D);
  \draw[thick,dashed] (4-G) -- (5-H);
  \drawlayer{}

  \deflayer{3.0}{0.1}{0.1}{green!60!black}
  \drawlayer{}
  \deflayer{3.0}{0.1}{0.1}{blue!60!black}
  \coordinate(5-B) at (B);
  \coordinate(5-C) at (C);
  \coordinate(5-F) at (F);
  \coordinate(5-G) at (G);
  \drawlayer{}



\end{tikzpicture}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../figs"
%%% End:
